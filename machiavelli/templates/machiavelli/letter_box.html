{% extends 'machiavelli/base.html' %}

{% load i18n %}

{% block head_title %}{% trans "Inbox" %}{% endblock %}

{% block body %}
<div id="game_info">
<ul>
<li>{% trans "Year" %}: {{ game.year }}</li>
<li>{% trans "Season" %}: {{ game.get_season_display }}</li>
<li>{% trans "Phase" %}: {{ game.get_phase_display }}</li>
<li>{% trans "Time left" %}: {{ game.next_phase_change|timeuntil }}</li>
<li>{% trans "Power" %}: {{ player.country }}</li>
</ul>
</div>
<h1>
{% ifequal box 'inbox' %}
{% trans "Received letters" %}
{% endifequal %}
{% ifequal box 'outbox' %}
{% trans "Sent letters" %}
{% endifequal %}
</h1>

<div class="pagination">
	<span class="step-links">
		{% if letters.has_previous %}
			<a href="?page={{ letters.previous_page_number }}">&lt;&lt;</a>
		{% endif %}
		
		<span class="current">
			{% trans "Page" %} {{ letters.number }} {% trans "of" %} {{ letters.paginator.num_pages }}.
		</span>

		{% if letters.has_next %}
			<a href="?page={{ letters.next_page_number }}">&gt;&gt;</a>
		{% endif %}
	</span>
</div>

<table id="diplomacy">
<thead>
<tr>
{% ifequal box 'inbox' %}
<th>{% trans "From" %}</th>
{% endifequal %}
{% ifequal box 'outbox' %}
<th>{% trans "To" %}</th>
{% endifequal %}
<th>{% trans "Summary" %}</th>
</tr>
</thead>
{% for letter in letters.object_list %}
<tr>
{% ifequal box 'inbox' %}
<td>{{ letter.sender.country }}</td>
{% endifequal %}
{% ifequal box 'outbox' %}
<td>{{ letter.receiver.country }}</td>
{% endifequal %}
<td>
<a href="{% url show-letter letter.id %}">{{ letter.inbox_color_output|safe }}
</a>
</td>
</tr>
{% endfor %}
</table>
<p><a href="{% url show-game game.slug %}">{% trans "Return to game" %}</a></p>
{% endblock %}
