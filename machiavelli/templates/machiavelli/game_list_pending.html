{% extends "machiavelli/base.html" %}

{% load i18n %}
{% load game_icons %}

{% block head_title %}
{% blocktrans %}Pending games{% endblocktrans %}
{% endblock %}

{% block body %}
{% if joinable %}
<h1>{% trans "Games you can join" %}</h1>
	<p>
	{% if game_list.object_list %}
		{% blocktrans %}The following games have not yet started, and you can join any of them.{% endblocktrans %}
	{% else %}
		{% blocktrans %}At this moment, there is no available games that you can join. Maybe you want to create a new game.{% endblocktrans %}
		<p><a href="{% url new-game %}">{% trans "New game" %}</a></p>
	{% endif %}
	</p>
{% else %}
<h1>{% trans "Your not started games" %}</h1>
	<p>
	{% if game_list.object_list %}
		{% blocktrans %}You are subscribed to the following games, but they still have not enough players to begin.{% endblocktrans %}
	{% else %}
		{% blocktrans %}All the games that you are subscribed to have already started.{% endblocktrans %}
	{% endif %}
	</p>
{% endif %}

{% if game_list.object_list %}

<table>
	<thead>
	<tr>
	<th>{% trans "Title" %}</th>
	<th>{% trans "Scenario" %}</th>
	<th>{% trans "Time limit" %}</th>
	<th>{% trans "Rules" %}</th>
	<th>{% trans "Visible players" %}</th>
	<th>{% trans "Slots" %}</th>
	</tr>
	</thead>
	{% for game in game_list.object_list %}
	<tr>
	<td><a href="{{ game.get_absolute_url }}">{{ game.slug }}</a></td>
	<td><a href="{% url show-scenario game.scenario.pk %}">{{ game.scenario.title }}</a></td>
	<td>{{ game.get_time_limit_display }}</td>
	<td>{% rule_icons game.configuration %}</td>
	<td>{{ game.visible|yesno }}</td>
	<td>{{ game.slots }}
		{% if joinable %}
		<a href="{% url join-game game.slug %}">{% trans "Join game" %}</a>
		{% endif %}
	</td>
	</tr>
	{% endfor %}
</table>

<div class="pagination">
	<span class="step-links">
		{% if game_list.has_previous %}
			<a href="?page={{ game_list.previous_page_number }}">&lt;&lt;</a>
		{% endif %}
		
		<span class="current">
			{% trans "Page" %} {{ game_list.number }} {% trans "of" %} {{ game_list.paginator.num_pages }}.
		</span>

		{% if game_list.has_next %}
			<a href="?page={{ game_list.next_page_number }}">&gt;&gt;</a>
		{% endif %}
	</span>
</div>

{% endif %}
{% endblock %}
