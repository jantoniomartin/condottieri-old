{% extends "machiavelli/base.html" %}

{% load i18n %}
{% load game_icons %}

{% block head_title %}
{% blocktrans %}Ongoing games{% endblocktrans %}
{% endblock %}

{% block body %}
<h1>{% trans "Your ongoing games" %}</h1>
{% if not player_list.object_list %}
	<p>{% blocktrans %}At this moment, you are not playing any games.{% endblocktrans %}</p>
{% else %}
	<p>{% blocktrans %}These are the games that you are currently playing.{% endblocktrans %}</p>
{% endif %}
<p>
<a href="{% url games-other-active %}">{% trans "See other active games" %}</a>
</p>	

{% if player_list.object_list %}

{% for player in player_list.object_list %}
<div class="game_info">
<h2 style="background: #191919 url('{{ STATIC_URL }}machiavelli/img/banner-{{ player.country.static_name }}.png') no-repeat top right"><span>
	<a href="{{ player.game.get_absolute_url }}">{{ player.game.slug }}</a>
</span></h2>
<dl>
<dt>{% trans "Scenario" %}</dt><dd><a href="{% url show-scenario player.game.scenario.pk %}">{{ player.game.scenario.title }}</a></dd>
<dt>{% trans "Turn" %}</dt><dd>{{ player.game.get_season_display }}, {{ player.game.year }} - {{ player.game.get_phase_display }}</dd>
<dt>{% trans "Players" %}</dt>
<dd>
	{% if player.game.visible %}
	<ul>
	{% for p in player.game.player_set.all %}
		{% if p.user %}
		<li>{{ p.user.username }}</li>
		{% endif %}
	{% endfor %}
	</ul>
	{% else %}
	{% trans "Players are not visible" %}
	{% endif %}
</dd>
</dl>

</div>
{% endfor %}

<div class="pagination">
	<span class="step-links">
		{% if player_list.has_previous %}
			<a href="?page={{ player_list.previous_page_number }}">&lt;&lt;</a>
		{% endif %}
		
		<span class="current">
			{% trans "Page" %} {{ player_list.number }} {% trans "of" %} {{ player_list.paginator.num_pages }}.
		</span>

		{% if player_list.has_next %}
			<a href="?page={{ player_list.next_page_number }}">&gt;&gt;</a>
		{% endif %}
	</span>
</div>

{% endif %}
{% endblock %}
